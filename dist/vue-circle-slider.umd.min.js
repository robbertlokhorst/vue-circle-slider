/*!
 * vue-circle-slider v0.1.0 
 * (c) 2021 
 * Released under the undefined License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t=t||self,e(t.VueCircleSlider={}))}(this,function(t){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,i,n,s,r,a,u,l,h){"boolean"!=typeof a&&(l=u,u=a,a=!1);var o="function"==typeof i?i.options:i;t&&t.render&&(o.render=t.render,o.staticRenderFns=t.staticRenderFns,o._compiled=!0,s&&(o.functional=!0)),n&&(o._scopeId=n);var d;if(r?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},o._ssrRegister=d):e&&(d=a?function(){e.call(this,h(this.$root.$options.shadowRoot))}:function(t){e.call(this,u(t))}),d)if(o.functional){var c=o.render;o.render=function(t,e){return d.call(e),c(t,e)}}else{var p=o.beforeCreate;o.beforeCreate=p?[].concat(p,d):[d]}return i}function n(t){t.component("circle-slider",c)}var s=function(t){return t?parseInt(t):0},r=function(t,e,i){var n;return function(){if(!e)return t.apply(this,arguments);var s=this,r=arguments,a=i&&!n;return clearTimeout(n),n=setTimeout(function(){if(n=null,!a)return t.apply(s,r)},e),a?t.apply(this,arguments):void 0}},a=function(t,e,i){var n=!1,s=!1;return function(){s=i&&!n;var r=this,a=arguments;if(n||(n=!0,setTimeout(function(){if(n=!1,!i)return t.apply(r,a)},e)),s)return s=!1,t.apply(this,arguments)}},u={name:"CircleSlider",props:{startAngleOffset:{type:Number,default:90},value:[Number,Object,String],side:{type:Number,default:100},stepSize:{type:Number,default:1},min:{type:Number,default:0},max:{type:Number,default:100},circleColor:{type:String,default:"#334860"},circleFill:{type:String,default:"none"},progressColor:{type:String,default:"#00be7e"},minKnobColor:{type:String,default:"#00be7e"},maxKnobColor:{type:String,default:"#00be7e"},minKnobRadius:{type:Number,default:null},minKnobRadiusRel:{type:Number,default:7},maxKnobRadius:{type:Number,default:null},maxKnobRadiusRel:{type:Number,default:7},circleWidth:{type:Number,default:null},circleWidthRel:{type:Number,default:20},progressWidth:{type:Number,default:null},progressWidthRel:{type:Number,default:10},counterClockwise:{type:Boolean,default:!1},rangeSlider:{type:Boolean,default:!1},debounceInput:{type:Number,default:1e3},throttleScroll:{type:Number,default:30},limitMin:{type:Number,default:0},limitMax:{type:Number,default:100}},data:function(){return{mousemoveTicks:0,currentMinStepIndex:0,currentMaxStepIndex:0,relativeX:0,relativeY:0,redundantAngle:0,currentKnob:"",sliderValues:{maxValue:0,minValue:0}}},computed:{stepsCount:function(){return 1+(this.max-this.min)/this.stepSize},steps:function(){var t=this;return Array.from({length:this.stepsCount},function(e,i){return t.min+i*t.stepSize})},radius:function(){var t=Math.max(this.mainCircleStrokeWidth,this.pathStrokeWidth);return this.side/2-Math.max(t,2*this.minKnobRadiusFinal,2*this.maxKnobRadiusFinal)/2},sliderTolerance:function(){return this.radius/2},stepsLength:function(){return this.steps.length-1},center:function(){return this.side/2},minAngleFinal:function(){return this.counterClockwise?this.minAngle+Math.PI/2-this.startAngleOffsetRadians:this.minAngle+this.startAngleOffsetRadians},maxAngleFinal:function(){return this.counterClockwise?this.maxAngle+Math.PI/2-this.startAngleOffsetRadians:this.maxAngle+this.startAngleOffsetRadians},mainCircleStrokeWidth:function(){return this.circleWidth||this.side/2/this.circleWidthRel},pathDirection:function(){return this.counterClockwise?this.maxAngle-this.minAngle<Math.PI?0:1:this.maxAngleFinal-(this.minAngleFinal-Math.PI/2)<1.5*Math.PI?0:1},pathX:function(){return this.counterClockwise?this.center+this.radius*Math.sin(this.maxAngleFinal):this.center+this.radius*Math.cos(this.maxAngleFinal)},pathY:function(){return this.counterClockwise?this.center+this.radius*Math.cos(this.maxAngleFinal):this.center+this.radius*Math.sin(this.maxAngleFinal)},pathStrokeWidth:function(){return this.progressWidth||this.side/2/this.progressWidthRel},minKnobRadiusFinal:function(){return this.minKnobRadius||this.side/2/this.minKnobRadiusRel},maxKnobRadiusFinal:function(){return this.maxKnobRadius||this.side/2/this.maxKnobRadiusRel},pathD:function(){var t=[];return t.push("M"+this.minKnobX),t.push(this.minKnobY),t.push("A"),t.push(this.radius),t.push(this.radius),t.push(0),t.push(this.pathDirection),t.push(this.counterClockwise?0:1),t.push(this.pathX),t.push(this.pathY),t.join(" ")},angleUnit:function(){return 2*Math.PI/this.stepsLength},minAngle:function(){return Math.min(this.angleUnit*this.currentMinStepIndex,2*Math.PI-Number.EPSILON)},maxAngle:function(){return Math.min(this.angleUnit*this.currentMaxStepIndex,2*Math.PI-Number.EPSILON)-1e-4},currentMinStepValue:function(){return this.steps[this.currentMinStepIndex]},currentMaxStepValue:function(){return this.steps[this.currentMaxStepIndex]},sliderAngle:function(){return(Math.atan2(this.relativeY-this.center,this.relativeX-this.center)+3*this.startAngleOffsetRadians-this.redundantAngle)%(2*Math.PI)},isTouchWithinSliderRange:function(){var t=Math.sqrt(Math.pow(Math.abs(this.relativeX-this.center),2)+Math.pow(Math.abs(this.relativeY-this.center),2));return Math.abs(t-this.radius)<=this.sliderTolerance},startAngleOffsetRadians:function(){return this.startAngleOffset/180*Math.PI},minKnobX:function(){return this.counterClockwise?this.center+this.radius*Math.sin(this.minAngleFinal):this.center+this.radius*Math.cos(this.minAngleFinal)},minKnobY:function(){return this.counterClockwise?this.center+this.radius*Math.cos(this.minAngleFinal):this.center+this.radius*Math.sin(this.minAngleFinal)},limitMinFit:function(){return this.fitToStep(this.limitMin)},limitMaxFit:function(){return this.fitToStep(this.limitMax)},processedValue:function(){return"object"===e(this.value)?{maxValue:this.fitToStep(s(this.value.maxValue)),minValue:this.fitToStep(s(this.value.minValue))}:this.fitToStep(s(this.value))}},watch:{processedValue:{handler:function(t){"object"===e(t)?(this.updateCurrentValue(t.maxValue,this.sliderValues.maxValue,!1),this.updateCurrentValue(t.minValue,this.sliderValues.minValue,!0)):this.updateCurrentValue(t,this.sliderValues.maxValue,!1)},deep:!0,immediate:!0}},methods:{updateCurrentValue:function(t,e,i){Math.abs(t-e)===this.stepSize?(i?this.sliderValues.minValue=t:this.sliderValues.maxValue=t,this.updateFromPropValue(this.sliderValues)):i?this.sliderValues.minValue=t:this.sliderValues.maxValue=t},updateFromPropValue:function(t){return this.checkIfLimitExceeded(t)?void this.emitMinMaxValues():t.minValue!==this.currentMinStepValue||t.maxValue!==this.currentMaxStepValue?t.maxValue!==this.currentMaxStepValue?(this.currentKnob="max",void(t.maxValue<this.sliderValues.minValue?this.setDefaultMaxValue():this.updateFromPropMaxValue(t.maxValue))):void(t.minValue!==this.currentMinStepValue&&(this.currentKnob="min",t.minValue>this.sliderValues.maxValue?this.setDefaultMinValue():this.updateFromPropMinValue(t.minValue))):void 0},checkIfLimitExceeded:function(t){return"object"===e(this.processedValue)?t.minValue<this.limitMinFit||t.maxValue>this.limitMaxFit:t.maxValue>this.limitMaxFit},fitToStep:function(t){return Math.round(t/this.stepSize)*this.stepSize},handleClick:function(t){if(this.setNewPosition(t),this.isTouchWithinSliderRange){var e=this.sliderAngle;this.defineCurrentKnob(e),"min"===this.currentKnob?this.animateSlider(this.minAngle,e):"max"===this.currentKnob&&this.animateSlider(this.maxAngle,e)}},handleMouseDown:function(t){if(t.preventDefault(),this.setNewPosition(t),this.isTouchWithinSliderRange){var e=this.sliderAngle;this.defineCurrentKnob(e)}window.addEventListener("mousemove",this.handleWindowMouseMove),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(t){t.preventDefault(),window.removeEventListener("mousemove",this.handleWindowMouseMove),window.removeEventListener("mouseup",this.handleMouseUp),this.mousemoveTicks=0},handleWindowMouseMove:function(t){if(t.preventDefault(),!(this.minAngle>=this.maxAngle&&this.maxAngle>0)){if(this.mousemoveTicks<5)return void this.mousemoveTicks++;this.setNewPosition(t),this.updateSlider()}},handleWheelScroll:function(t){if(t.preventDefault(),!this.rangeSlider){this.currentKnob="max";var e=t.wheelDelta>0?this.sliderValues.maxValue+this.stepSize:this.sliderValues.maxValue-this.stepSize;0===this.currentMaxStepValue&&t.wheelDelta<0||100===this.currentMaxStepValue&&t.wheelDelta>0||this.updateFromPropMaxValue(e)}},handleTouchMove:function(t){if(this.$emit("touchmove"),t.targetTouches.length>1||t.changedTouches.length>1||t.touches.length>1)return!0;var e=t.targetTouches.item(t.targetTouches.length-1);if(this.setNewPosition(e),this.isTouchWithinSliderRange){t.preventDefault();var i=this.sliderAngle;this.defineCurrentKnob(i),this.updateSlider()}},updateMinAngle:function(t){this.updateCurrentMinStepFromAngle(t),this.emitMinMaxValues()},updateMaxAngle:function(t){this.updateCurrentMaxStepFromAngle(t),this.emitMinMaxValues()},updateFromPropMinValue:function(t){var e=this.minAngle;this.updateCurrentMinStepFromValue(t),this.animateSlider(e,this.minAngle)},updateFromPropMaxValue:function(t){var e=this.maxAngle;this.updateCurrentMaxStepFromValue(t),this.animateSlider(e,this.maxAngle)},updateSlider:function(){var t=this.sliderAngle;this.defineCurrentKnob(t),"max"===this.currentKnob&&Math.abs(t-this.maxAngle)<Math.PI?this.updateMaxAngle(t):"min"===this.currentKnob&&Math.abs(t-this.minAngle)<Math.PI&&this.updateMinAngle(t)},animateSlider:function(t,e){var i=this,n=t<e?1:-1,s=n*this.angleUnit*2/this.stepSize,r=function(){Math.abs(e-t)<Math.abs(2*s)&&("max"===i.currentKnob&&e>0?i.updateMaxAngle(e):"min"===i.currentKnob&&i.updateMinAngle(e))};window.requestAnimationFrame(r)},defineInitialCurrentStepIndex:function(){for(var t in this.steps)this.steps[t]===this.sliderValues.minValue&&(this.currentMinStepIndex=parseInt(t)),this.steps[t]===this.sliderValues.maxValue&&(this.currentMaxStepIndex=parseInt(t))},updateCurrentMinStepFromValue:function(t){for(var e=0;e<this.stepsLength;e++)if(t<=this.steps[e])return void(this.currentMinStepIndex=e)},updateCurrentMaxStepFromValue:function(t){for(var e=0;e<this.stepsLength;e++)if(t<=this.steps[e])return void(this.currentMaxStepIndex=e);this.currentMaxStepIndex=this.stepsLength},updateCurrentMinStepFromAngle:function(t){var e=this.getStepIndexFromAngle(t),i=this.limitMinFit/this.stepSize;this.currentMinStepIndex=this.steps[e]<this.limitMinFit?i:e},updateCurrentMaxStepFromAngle:function(t){var e=this.getStepIndexFromAngle(t),i=this.limitMaxFit/this.stepSize;this.currentMaxStepIndex=this.steps[e]>this.limitMaxFit?i:e},getStepIndexFromAngle:function(t){var e=Math.round(t/this.angleUnit);return Math.min(Math.max(e,0),this.stepsLength)},setNewPosition:function(t){var e=this.containerElement.getBoundingClientRect();this.counterClockwise?this.relativeX=e.right-(t.clientX||t.x):this.relativeX=(t.clientX||t.x)-e.left,this.relativeY=(t.clientY||t.y)-e.top,this.calculateRedundantAngle()},calculateRedundantAngle:function(){var t=Math.atan2(this.relativeY-this.center,this.relativeX-this.center)+3*this.startAngleOffsetRadians;this.startAngleOffsetRadians===Math.PI/2||this.redundantAngle||(this.redundantAngle=t-2*Math.PI)},setInitialPosition:function(){var t=this.containerElement.getBoundingClientRect(),e=(this.pathX+t.left).toFixed(0),i=(this.pathY+t.top).toFixed(0);this.setNewPosition({x:e,y:i})},defineCurrentKnob:function(t){if(!this.rangeSlider)return void(this.currentKnob="max");if(t>this.maxAngle)this.currentKnob="max";else if(t<this.minAngle)this.currentKnob="min";else{var e=Math.abs(this.maxAngle-t),i=Math.abs(this.minAngle-t);this.currentKnob=e<=i?"max":"min"}t+this.minKnobRadiusFinal/(2*Math.PI*this.radius/360)/180*Math.PI>2*Math.PI&&(this.currentKnob="")},setDefaultMinValue:function(){var t=this.currentMinStepValue;this.updateFromPropMinValue(t),this.emitMinMaxValues()},setDefaultMaxValue:function(){var t=this.currentMaxStepValue;this.updateFromPropMaxValue(t),this.emitMinMaxValues()},emitMinMaxValues:function(){"object"!==e(this.processedValue)?this.$emit("input",this.currentMaxStepValue):this.$emit("input",{minValue:this.currentMinStepValue,maxValue:this.currentMaxStepValue})},throttleWheelScroll:function(){var t=this;return a(function(e){return t.handleWheelScroll(e)},this.throttleScroll)},debounceUserInput:function(){var t=this;return r(function(){return t.updateFromPropValue(t.sliderValues)},this.debounceInput)}},created:function(){this.defineInitialCurrentStepIndex()},mounted:function(){this.containerElement=this.$refs._svg,this.setInitialPosition(),this.emitMinMaxValues(),this.rangeSlider||this.containerElement.addEventListener("wheel",this.throttleWheelScroll()),window.addEventListener("input",this.debounceUserInput())},beforeDestroy:function(){this.containerElement.removeEventListener("wheel",this.throttleWheelScroll()),window.removeEventListener("input",this.debounceUserInput())}},l=i;const h=u;var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("svg",{ref:"_svg",attrs:{width:t.side+"px",height:t.side+"px",viewBox:"0 0 "+t.side+" "+t.side},on:{touchmove:t.handleTouchMove,click:t.handleClick,mousedown:t.handleMouseDown,mouseup:t.handleMouseUp}},[i("g",[i("circle",{attrs:{stroke:t.circleColor,"stroke-width":t.mainCircleStrokeWidth,cx:t.center,cy:t.center,r:t.radius,fill:t.circleFill}}),t._v(" "),i("path",{attrs:{stroke:t.progressColor,"stroke-width":t.pathStrokeWidth,d:t.pathD,fill:"none"}}),t._v(" "),t.rangeSlider?i("circle",{attrs:{fill:t.minKnobColor,r:t.minKnobRadiusFinal,cx:t.minKnobX,cy:t.minKnobY}}):t._e(),t._v(" "),i("circle",{attrs:{fill:t.maxKnobColor,r:t.maxKnobRadiusFinal,cx:t.pathX,cy:t.pathY}})])])])},d=[];var c=l({render:o,staticRenderFns:d},void 0,h,void 0,!1,void 0,void 0,void 0),p={version:"0.1.0",install:n},m=null;"undefined"!=typeof window?m=window.Vue:"undefined"!=typeof global&&(m=global.Vue),m&&m.use(p),t.CircleSlider=c,t.default=p,t.install=n,Object.defineProperty(t,"__esModule",{value:!0})});